<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TeleSyriana â€“ Agent Access Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="app-wrapper">

    <!-- HEADER -->
    <header class="app-header">
      <nav id="main-nav" class="main-nav hidden">
        <button class="nav-link" data-page="home">Home</button>
        <button class="nav-link" data-page="tasks">Tasks</button>
        <button class="nav-link" data-page="messages">Messages</button>
        <button class="nav-link" data-page="settings">Settings</button>

        <div class="actions">
          <button id="logout-btn" class="nav-link">Logout</button>
        </div>
      </nav>

      <div class="header-right">
        <div class="logo">Tele<span>Syriana</span></div>
        <div class="tagline">Agent Access Portal</div>
      </div>
    </header>

    <!-- LOGIN SCREEN -->
    <main id="login-screen">
      <div class="login-layout">
        <section class="login-banner">
          <img src="images/event.png" class="banner-img" alt="Event Banner" />
        </section>

        <section class="card login-card">
          <h1>Login</h1>
          <p class="subtitle">Please sign in with your CCMS ID and password.</p>

          <div id="login-error" class="alert hidden"></div>

          <form id="login-form">
            <label>
              CCMS ID
              <input type="text" id="ccmsId" placeholder="e.g. 1001" required />
            </label>

            <label>
              Password
              <input type="password" id="password" placeholder="Password" required />
            </label>

            <button type="submit" class="btn-primary">Login</button>
          </form>

          <p class="hint">
            Demo users:<br />
            <code>1001 / 1002 / 1003</code> (Agents)<br />
            <code>2001 / sup123</code> (Dema Shabar)<br />
            <code>2002 / sup123</code> (Moustafa Shabar)
          </p>
        </section>
      </div>
    </main>

    <!-- DASHBOARD -->
    <main id="dashboard-screen" class="hidden">

      <!-- HOME PAGE -->
      <section id="page-home" class="page-section">
        <div class="dashboard-layout">

          <section class="card dashboard-main">
            <h1 id="welcome-title">Welcome</h1>
            <p id="welcome-subtitle" class="subtitle"></p>

            <div class="status-box">
              <div class="status-label">Current status:</div>
              <div id="status-value" class="status-value status-in_operation">Operating</div>
            </div>

            <div class="status-controls">
              <label for="status-select">Change status:</label>
              <select id="status-select">
                <option value="in_operation">In Operation</option>
                <option value="break">In Break</option>
                <option value="unavailable">Unavailable</option>
                <option value="meeting">In Meeting</option>
                <option value="handling">Handling</option>
              </select>
              <small class="status-note">Break limit: <strong>45 minutes</strong>.</small>
            </div>

            <div class="break-box">
              <div>Break used: <span id="break-used">0</span> / 45 min</div>
              <div>Remaining: <span id="break-remaining">45</span> min</div>
            </div>

            <div class="time-box">
              <div>Operation: <span id="op-min">0</span></div>
              <div>Meeting: <span id="meet-min">0</span></div>
              <div>Handling: <span id="hand-min">0</span></div>
            </div>

            <section id="supervisor-panel" class="sup-panel hidden">
              <h2>Team Overview</h2>
              <p class="sup-note">Live status for all agents today.</p>

              <div class="sup-summary">
                <span>Operation: <strong id="sum-op">0</strong></span>
                <span>Break: <strong id="sum-break">0</strong></span>
                <span>Meeting: <strong id="sum-meet">0</strong></span>
                <span>Unavailable: <strong id="sum-unavail">0</strong></span>
              </div>

              <div class="sup-table-wrapper">
                <table class="sup-table">
                  <thead>
                    <tr>
                      <th>Agent</th>
                      <th>CCMS</th>
                      <th>Role</th>
                      <th>Status</th>
                      <th>Operation</th>
                      <th>Break</th>
                      <th>Meeting</th>
                      <th>Unavailable</th>
                      <th>Last login</th>
                    </tr>
                  </thead>
                  <tbody id="sup-table-body"></tbody>
                </table>
              </div>
            </section>
          </section>

          <!-- RIGHT SIDE (Todayâ€™s Snapshot) -->
          <section class="card dashboard-side">
            <h2>Todayâ€™s Snapshot</h2>
            <p class="subtitle">Quick reminders:</p>

            <ul class="side-list">
              <li>âœ” Keep your status updated.</li>
              <li>âœ” Use break time wisely.</li>
              <li>âœ” Be kind with callers.</li>
            </ul>

            <div class="widgets-grid">

              <div class="widget-card">
                <div class="widget-head">
                  <div class="widget-title">Clock</div>
                  <button class="kebab" type="button">â‹¯</button>
                </div>
                <div id="widget-clock" class="widget-big">--:--</div>
                <div id="widget-day" class="widget-sub">â€”</div>
              </div>

              <div class="widget-card">
                <div class="widget-head">
                  <div class="widget-title">Today</div>
                  <button class="kebab" type="button">â‹¯</button>
                </div>
                <div id="widget-date" class="widget-big">â€”</div>
                <div class="widget-sub">Local date</div>
              </div>

              <div class="widget-card widget-calendar">
                <div class="widget-head">
                  <div id="cal-title" class="widget-title">January, 2025</div>
                  <div class="cal-nav">
                    <button id="cal-prev" class="cal-btn" type="button">â€¹</button>
                    <button id="cal-next" class="cal-btn" type="button">â€º</button>
                  </div>
                </div>

                <div class="mini-cal">
                  <div class="mini-cal-weekdays">
                    <span>Mo</span><span>Tu</span><span>We</span><span>Th</span><span>Fr</span><span>Sa</span><span>Su</span>
                  </div>
                  <div id="cal-grid" class="mini-cal-grid"></div>
                </div>
              </div>

              <div class="widget-card">
                <div class="widget-head">
                  <div class="widget-title">Break</div>
                  <button class="kebab" type="button">â‹¯</button>
                </div>

                <div class="ring-row">
                  <div class="ring">
                    <svg viewBox="0 0 36 36">
                      <path class="ring-bg"
                        d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                      <path id="ring-progress" class="ring-fg"
                        stroke-dasharray="0, 100"
                        d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                    </svg>
                    <div id="ring-label" class="ring-label">0%</div>
                  </div>

                  <div class="ring-text">
                    <div class="widget-big" id="break-text">0 / 45</div>
                    <div class="widget-sub">min used</div>
                  </div>
                </div>
              </div>

              <div class="widget-card">
                <div class="widget-head">
                  <div class="widget-title">Hours worked</div>
                  <button class="kebab" type="button">â‹¯</button>
                </div>

                <div class="ring-row">
                  <div class="ring">
                    <svg viewBox="0 0 36 36">
                      <path class="ring-bg"
                        d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                      <path id="work-ring-progress" class="ring-fg"
                        stroke-dasharray="0, 100"
                        d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                    </svg>
                    <div id="work-ring-label" class="ring-label">0%</div>
                  </div>

                  <div class="ring-text">
                    <div class="widget-big">
                      <span id="work-text">0 min</span> / <span id="work-target-text">8 hrs</span>
                    </div>
                    <div class="widget-sub">Remaining: <span id="work-remaining-text">8 hrs</span></div>
                  </div>
                </div>
              </div>

            </div>
          </section>

        </div>
      </section>

      <!-- TASKS PAGE -->
      <section id="page-tasks" class="page-section hidden">
        <section class="card">
          <div class="tasks-top">
            <div>
              <h2 style="margin:0">Tasks</h2>
              <p class="subtitle" style="margin:6px 0 0">Trello-style board (drag â€¢ drop â€¢ delete)</p>
            </div>

            <form id="task-add-form" class="task-add">
              <input id="task-title" type="text" placeholder="New task titleâ€¦" required />
              <select id="task-col">
                <option value="todo">To do</option>
                <option value="doing">Doing</option>
                <option value="done">Done</option>
              </select>
              <button class="btn-primary" type="submit" style="width:auto;padding:10px 16px">Add</button>
            </form>
          </div>

          <div class="kanban" id="kanban">
            <div class="kanban-col" data-col="todo">
              <div class="kanban-head">To do <span class="count" data-count="todo">0</span></div>
              <div class="kanban-list" data-list="todo"></div>
            </div>

            <div class="kanban-col" data-col="doing">
              <div class="kanban-head">Doing <span class="count" data-count="doing">0</span></div>
              <div class="kanban-list" data-list="doing"></div>
            </div>

            <div class="kanban-col" data-col="done">
              <div class="kanban-head">Done <span class="count" data-count="done">0</span></div>
              <div class="kanban-list" data-list="done"></div>
            </div>
          </div>
        </section>

        <!-- TASK MODAL -->
        <div id="task-modal" class="modal hidden">
          <div class="modal-backdrop" data-modal-close></div>

          <div class="modal-card">
            <div class="modal-head">
              <div class="modal-title">Add new task</div>
              <button class="modal-x" type="button" data-modal-close>Ã—</button>
            </div>

            <form id="task-modal-form" class="modal-body">
              <label>
                Title
                <input id="task-modal-title" type="text" placeholder="Task titleâ€¦" required />
              </label>

              <label>
                Description
                <textarea id="task-modal-desc" rows="4" placeholder="Write detailsâ€¦"></textarea>
              </label>

              <label>
                Image (optional)
                <input id="task-modal-img" type="url" placeholder="Paste image URL (Copy link address)..." />
                <small class="hint">Or upload from device:</small>
                <input id="task-modal-file" type="file" accept="image/*" />
              </label>

              <label>
                Column
                <select id="task-modal-col">
                  <option value="todo">To do</option>
                  <option value="doing">Doing</option>
                  <option value="done">Done</option>
                </select>
              </label>

              <div class="modal-actions">
                <button type="button" class="btn-secondary" data-modal-close>Cancel</button>
                <button type="submit" class="btn-primary" style="width:auto">Save</button>
              </div>
            </form>
          </div>
        </div>
      </section>

      <!-- âœ… MESSAGES PAGE (THIS WAS THE BROKEN PART) -->
      <section id="page-messages" class="page-section hidden">
        <section class="card messages-card">
          <div class="messages-layout">

            <!-- SIDEBAR (must be inside messages-layout) -->
            <aside class="messages-sidebar glass">

              <div class="ms-top">
                <div class="ms-title">Messages</div>

                <div class="ms-search">
                  <input id="chat-search" type="text" placeholder="Search name / roomâ€¦" autocomplete="off" />
                  <button id="chat-search-x" class="ms-search-x" type="button" title="Clear">Ã—</button>
                </div>
              </div>

              <div class="messages-sidebar-header">Rooms</div>
              <div id="room-list" class="ms-list">
                <button class="chat-room" data-room="general">
                  <div class="chat-row">
                    <div class="chat-avatar role-room">#</div>
                    <div class="chat-row-text">
                      <div class="chat-room-title">General chat</div>
                      <div class="chat-room-sub">All agents &amp; supervisors</div>
                    </div>
                  </div>
                </button>

                <button class="chat-room" data-room="supervisors">
                  <div class="chat-row">
                    <div class="chat-avatar role-supervisor">S</div>
                    <div class="chat-row-text">
                      <div class="chat-room-title">
                        Supervisors <span class="room-badge">Supervisor only</span>
                      </div>
                      <div class="chat-room-sub">Internal notes</div>
                    </div>
                  </div>
                </button>

                <button class="chat-room" data-room="ai">
                  <div class="chat-row">
                    <div class="chat-avatar role-ai">AI</div>
                    <div class="chat-row-text">
                      <div class="chat-room-title">
                        ChatGPT 5 <span class="room-badge">Coming soon</span>
                      </div>
                      <div class="chat-room-sub">AI assistant room</div>
                    </div>
                  </div>
                </button>
              </div>

              <div class="messages-sidebar-header small">Direct messages</div>
              <div id="dm-list" class="ms-list">

                <button class="chat-dm" data-dm="1001">
                  <div class="chat-row">
                    <div class="dm-avatar-wrap">
                      <div class="chat-avatar role-agent" data-avatar="1001">A1</div>
                      <span class="status-dot dot-offline" data-status-dot="1001"></span>
                    </div>
                    <div class="chat-row-text">
                      <div class="chat-room-title" data-name="1001">Agent 01</div>
                      <div class="chat-room-sub" data-sub="1001">Direct chat</div>
                    </div>
                  </div>
                </button>

                <button class="chat-dm" data-dm="1002">
                  <div class="chat-row">
                    <div class="dm-avatar-wrap">
                      <div class="chat-avatar role-agent" data-avatar="1002">A2</div>
                      <span class="status-dot dot-offline" data-status-dot="1002"></span>
                    </div>
                    <div class="chat-row-text">
                      <div class="chat-room-title" data-name="1002">Agent 02</div>
                      <div class="chat-room-sub" data-sub="1002">Direct chat</div>
                    </div>
                  </div>
                </button>

                <button class="chat-dm" data-dm="1003">
                  <div class="chat-row">
                    <div class="dm-avatar-wrap">
                      <div class="chat-avatar role-agent" data-avatar="1003">A3</div>
                      <span class="status-dot dot-offline" data-status-dot="1003"></span>
                    </div>
                    <div class="chat-row-text">
                      <div class="chat-room-title" data-name="1003">Agent 03</div>
                      <div class="chat-room-sub" data-sub="1003">Direct chat</div>
                    </div>
                  </div>
                </button>

                <button class="chat-dm" data-dm="2001">
                  <div class="chat-row">
                    <div class="dm-avatar-wrap">
                      <div class="chat-avatar role-supervisor" data-avatar="2001">SD</div>
                      <span class="status-dot dot-offline" data-status-dot="2001"></span>
                    </div>
                    <div class="chat-row-text">
                      <div class="chat-room-title" data-name="2001">Supervisor Dema</div>
                      <div class="chat-room-sub" data-sub="2001">Direct chat</div>
                    </div>
                  </div>
                </button>

                <button class="chat-dm" data-dm="2002">
                  <div class="chat-row">
                    <div class="dm-avatar-wrap">
                      <div class="chat-avatar role-supervisor" data-avatar="2002">SM</div>
                      <span class="status-dot dot-offline" data-status-dot="2002"></span>
                    </div>
                    <div class="chat-row-text">
                      <div class="chat-room-title" data-name="2002">Supervisor Moustafa</div>
                      <div class="chat-room-sub" data-sub="2002">Direct chat</div>
                    </div>
                  </div>
                </button>

              </div>
            </aside>

            <!-- CHAT AREA -->
            <div class="messages-main">
              <header class="chat-header">
                <div>
                  <div class="chat-room-name" id="chat-room-name">Messages</div>
                  <div class="chat-room-desc" id="chat-room-desc">Start chattingâ€¦</div>
                </div>
              </header>

              <div id="chat-empty" class="chat-empty">
                Select a room or a person from the left to start chatting.
              </div>

              <div id="chat-message-list" class="chat-message-list"></div>

              <form id="chat-form" class="chat-input-row">
                <input
                  id="chat-input"
                  type="text"
                  autocomplete="off"
                  placeholder="Type a messageâ€¦"
                  class="chat-input"
                  disabled
                />
                <button type="submit" class="chat-send-btn" disabled>Send</button>
              </form>
            </div>

          </div>
        </section>
      </section>

      <!-- SETTINGS PAGE -->
      <section id="page-settings" class="page-section hidden">
        <div class="card">
          <h2>Settings</h2>
          <p class="subtitle">Update personal info</p>

          <form id="settings-form">
            <label>
              Full Name
              <input type="text" id="set-name" disabled />
            </label>

            <label>
              Birthday
              <input type="date" id="set-birthday" />
            </label>

            <label>
              Notes
              <textarea id="set-notes" placeholder="Report any issue..."></textarea>
            </label>

            <button type="submit" class="btn-primary">Save</button>
          </form>
        </div>
      </section>

    </main>
  </div>

  <!-- FLOATING CHAT BUBBLE -->
  <button id="float-chat-toggle" class="floating-chat-toggle hidden">ðŸ’¬</button>

  <div id="float-chat-panel" class="floating-chat-panel hidden">
    <div class="floating-chat-header">
      <div class="floating-chat-title">TeleSyriana chat</div>
      <button id="float-chat-close" class="floating-chat-close">Ã—</button>
    </div>

    <div class="floating-chat-body">
      <div class="floating-chat-room-name">General chat</div>
      <div class="floating-chat-note">Compact mode â€¢ ChatGPT 5 coming soon.</div>
      <div id="float-chat-messages" class="floating-chat-messages"></div>
    </div>

    <form id="float-chat-form" class="floating-chat-input-row">
      <input id="float-chat-input" type="text" autocomplete="off" placeholder="Quick messageâ€¦" />
      <button type="submit">Send</button>
    </form>
  </div>

  <!-- scripts -->
  <script type="module" src="app.js"></script>
  <script type="module" src="tasks.js"></script>
  <script type="module" src="messages.js"></script>
</body>
</html>
